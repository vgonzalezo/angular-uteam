/*! angular-uteam 23-09-2014 */
var uteamApp=angular.module("angular-uteam",["webcam","angularFileUpload","ui.bootstrap"]);uteamApp.run(["$rootScope",function(a){a.img=null,a.showImage=function(){console.log(a.img),$(".imageselector img").attr("src",a.img)}}]),uteamApp.directive("imageselector",function(){return{restrict:"E",transclude:!0,replace:!0,template:'<div class="imageselector" ng-file-drop="onFileSelect($files);" accept="image/*" ng-file-drag-over-class=""><img ng-src="{{src}}" /><div class="toolbar"><button class="btn btn-orange" ng-click="webcam()"><i class="glyphicon glyphicon-camera"></i></button><button class="btn btn-orange"><i class="glyphicon glyphicon-picture"></i><input type="file" ng-file-select="onFileSelect($files)" accept="image/*" /></button></div></div>',controller:"imageselector-ctrl",scope:{src:"@"}}}),uteamApp.controller("imageselector-ctrl",["$scope","$rootScope","$modal",function(a,b,c){var d=function(){return!!(navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia)};if(d()){navigator.webkitGetUserMedia({video:!0},function(a){console.log(a)},function(){})}else alert("getUserMedia() is not supported in your browser");var e=function(a){var c=new FileReader;c.readAsDataURL(a),c.onloadend=function(){b.img=c.result,b.showImage()}};a.onFileSelect=function(a){e(a[0])},a.webcam=function(){c.open({template:'<div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true" ng-click="close()">&times;</button><h4 class="modal-title">TOMA TU FOTO</h4></div><div class="modal-body"><div id="takePhoto" class="modal-container"><webcam></webcam></div></div><div class="modal-footer"><div class="pull-right"><button type="button" class="btn btn-orange" ng-click="select()">Aceptar</button><button type="button" class="btn btn-orange" ng-click="close()">Cancelar</button></div></div>',controller:"webcam-ctrl",size:"sm"})}}]),uteamApp.directive("menu",function(){return{restrict:"E",transclude:!0,replace:!0,templateUrl:"menu/angular-uteam-menu.html",controller:"menu-ctrl",scope:{src:"@"}}}),uteamApp.controller("menu-ctrl",["$scope","$rootScope","$modal",function(){$("#menu").mmenu({classes:"mm-white",counters:!0,searchfield:{add:!0,search:!0,placeholder:"Buscar...",noResults:"No se han encontrado resultados."},header:{add:!0,update:!0,title:"StoreDocs"}})}]),uteamApp.controller("webcam-ctrl",["$scope","$rootScope","$modalInstance",function(a,b,c){var d=function(a){var c=document.createElement("canvas");c.width=a.videoWidth,c.height=a.videoHeight;var d=c.getContext("2d");d.drawImage(a,0,0),b.img=c.toDataURL(),b.showImage()};a.close=function(){c.close()},a.select=function(){d($("video")[0]),c.close()}}]);